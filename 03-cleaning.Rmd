# Data transformation
To make the dataset more reasonable,we did some data transformation first. To be more specific, for dateset 1 which is the COMPAS data, we transformed the data by removing the charge date of a defendant's COMPAS scored crime was not within 30 days, the data could not find a compas case at all, as well as the row with missed score values.  

For dateset 2 which is the NYPD crime data, we removes all the NA terms and selected 12 variables that we considers worth exploring.Rename some of the variable names and made each borough specific.  

And then we add the New York City shape file.
```{r}
#Data transformation for dataset 1
df <- dplyr::select(raw_data, age, c_charge_degree, race, age_cat, score_text, sex, priors_count,days_b_screening_arrest, decile_score, is_recid, two_year_recid, c_jail_in, c_jail_out) %>% 
        filter(days_b_screening_arrest <= 30) %>%
        filter(days_b_screening_arrest >= -30) %>%
        filter(is_recid != -1) %>%
        filter(c_charge_degree != "O") %>%
        filter(score_text != 'N/A')
nrow(df)
head(df)
str(df)

#Data transformation for dataset 2
dt<-read_excel("/Users/jessie/Desktop/STAT 5702/Final Project/12 Variables NYPD Arrest Data.xlsx")
#Remove NA
dt<-dt[complete.cases(dt),] 

#Renmae variable names
colnames(dt)<-c("id","date","offense","boro","precinct","age","sex","race","X_COORD_CD","Y_COORD_CD","Latitude","Longitude","New Georeferenced Column")

#Rename boro specific
dt$boro <- revalue(dt$boro, c("Q"="Queens", "K"="Brooklyn", "M"="Manhattan", "S"="Staten Island", "B" = "Bronx")) 


#Data transformation for dataset 3
shpdt<-st_read("/Users/jessie/Downloads/Police Precincts/geo_export_9f1de9c6-45df-4c9a-8939-1843acf3378c.shp")
```