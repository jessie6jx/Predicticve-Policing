<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Predictive Policing</title>
  <meta name="description" content="Chapter 3 Data transformation | Predictive Policing" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Predictive Policing" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Predictive Policing" />
  
  
  

<meta name="author" content="Jiaxi Liu/Ruoxi Li" />


<meta name="date" content="2021-04-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="shpdt-1-attachment" rel="attachment" href="libs/shpdt-0.0.1/shpdt_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<link id="dt1-race-1-attachment" rel="attachment" href="libs/dt1-race-0.0.1/dt1-race_layer.fgb"/>
<link id="dt1-age-1-attachment" rel="attachment" href="libs/dt1-age-0.0.1/dt1-age_layer.fgb"/>
<link id="dt1-sex-1-attachment" rel="attachment" href="libs/dt1-sex-0.0.1/dt1-sex_layer.fgb"/>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Predictive Policing</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="from-the-logistic-result-we-know-that-black-people-actually-7-4-less-likely-than-white-people-to-get-invlve-in-the-drug-problems-for-people-with-same-age-and-sex-.html"><a href="from-the-logistic-result-we-know-that-black-people-actually-7-4-less-likely-than-white-people-to-get-invlve-in-the-drug-problems-for-people-with-same-age-and-sex-.html"><i class="fa fa-check"></i><b>6</b> From the logistic result we know that black people actually 7.4% less likely than white people to get invlve in the drug problems for people with same age and sex.</a></li>
<li class="chapter" data-level="7" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>7</b> Interactive component</a></li>
<li class="chapter" data-level="8" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>8</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Predictive Policing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>To make the dataset more reasonable,we did some data transformation first. To be more specific, for dateset 1 which is the COMPAS data, we transformed the data by removing the charge date of a defendantâ€™s COMPAS scored crime was not within 30 days, the data could not find a compas case at all, as well as the row with missed score values.</p>
<p>For dateset 2 which is the NYPD crime data, we removes all the NA terms and selected 12 variables that we considers worth exploring.Rename some of the variable names and made each borough specific.</p>
<p>And then we add the New York City shape file.</p>
<pre><code>## [1] 6172</code></pre>
<pre><code>##   age c_charge_degree             race         age_cat score_text  sex priors_count
## 1  69               F            Other Greater than 45        Low Male            0
## 2  34               F African-American         25 - 45        Low Male            0
## 3  24               F African-American    Less than 25        Low Male            4
## 4  44               M            Other         25 - 45        Low Male            0
## 5  41               F        Caucasian         25 - 45     Medium Male           14
## 6  43               F            Other         25 - 45        Low Male            3
##   days_b_screening_arrest decile_score is_recid two_year_recid           c_jail_in
## 1                      -1            1        0              0 2013-08-13 06:03:42
## 2                      -1            3        1              1 2013-01-26 03:45:27
## 3                      -1            4        1              1 2013-04-13 04:58:34
## 4                       0            1        0              0 2013-11-30 04:50:18
## 5                      -1            6        1              1 2014-02-18 05:08:24
## 6                      -1            4        0              0 2013-08-29 08:55:23
##            c_jail_out
## 1 2013-08-14 05:41:20
## 2 2013-02-05 05:36:53
## 3 2013-04-14 07:02:04
## 4 2013-12-01 12:28:56
## 5 2014-02-24 12:18:30
## 6 2013-08-30 08:42:13</code></pre>
<pre><code>## &#39;data.frame&#39;:    6172 obs. of  13 variables:
##  $ age                    : int  69 34 24 44 41 43 39 27 23 37 ...
##  $ c_charge_degree        : chr  &quot;F&quot; &quot;F&quot; &quot;F&quot; &quot;M&quot; ...
##  $ race                   : chr  &quot;Other&quot; &quot;African-American&quot; &quot;African-American&quot; &quot;Other&quot; ...
##  $ age_cat                : chr  &quot;Greater than 45&quot; &quot;25 - 45&quot; &quot;Less than 25&quot; &quot;25 - 45&quot; ...
##  $ score_text             : chr  &quot;Low&quot; &quot;Low&quot; &quot;Low&quot; &quot;Low&quot; ...
##  $ sex                    : chr  &quot;Male&quot; &quot;Male&quot; &quot;Male&quot; &quot;Male&quot; ...
##  $ priors_count           : int  0 0 4 0 14 3 0 0 3 0 ...
##  $ days_b_screening_arrest: int  -1 -1 -1 0 -1 -1 -1 -1 0 0 ...
##  $ decile_score           : int  1 3 4 1 6 4 1 4 6 1 ...
##  $ is_recid               : int  0 1 1 0 1 0 0 0 1 0 ...
##  $ two_year_recid         : int  0 1 1 0 1 0 0 0 1 0 ...
##  $ c_jail_in              : chr  &quot;2013-08-13 06:03:42&quot; &quot;2013-01-26 03:45:27&quot; &quot;2013-04-13 04:58:34&quot; &quot;2013-11-30 04:50:18&quot; ...
##  $ c_jail_out             : chr  &quot;2013-08-14 05:41:20&quot; &quot;2013-02-05 05:36:53&quot; &quot;2013-04-14 07:02:04&quot; &quot;2013-12-01 12:28:56&quot; ...</code></pre>
<pre><code>## Reading layer `geo_export_9f1de9c6-45df-4c9a-8939-1843acf3378c&#39; from data source `/Users/jessie/Downloads/Police Precincts/geo_export_9f1de9c6-45df-4c9a-8939-1843acf3378c.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 77 features and 3 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -74.25559 ymin: 40.49612 xmax: -73.70001 ymax: 40.91553
## Geodetic CRS:  WGS84(DD)</code></pre>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jessie6jx/Predicticve-Policing/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jessie6jx/Predicticve-Policing/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
